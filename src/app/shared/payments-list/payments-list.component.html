<search (emmitSearch)="searchPayments($event)"></search>

<button (click)="addPaymentModal.toggle()">Adicionar Pagamento</button>

<section class="listagem">
  <table class="payments">
    <tr class="table-header">
      <th class="th_item"><a id="name" class="filter__link" href="#">Usuário</a></th>
      <th class="th_item"><a id="wins" class="filter__link filter__link--number" href="#">Título</a></th>
      <th class="th_item"><a id="draws" class="filter__link filter__link--number" href="#">Data</a></th>
      <th class="th_item"><a id="losses" class="filter__link filter__link--number" href="#">Valor</a></th>
      <th class="th_item"><a id="total" class="filter__link filter__link--number" href="#">Pago</a></th>
      <th class="th_item"></th>
    </tr>

    <ng-template ngFor let-payment [ngForOf]="shownPayments">
      <tr class="table-row" *ngIf="payment.name">
        <td class="td_item">
          {{ payment.name }}<span>@{{ payment.username }}</span>
        </td>
        <td class="td_item">{{ payment.title }}</td>
        <td class="td_item">{{ payment.date }}</td>
        <td class="td_item">{{ payment.value }}</td>

        <td class="td_item">
          <ng-template [ngIf]="payment.isPayed" [ngIfElse]="notPayed">
            <input type="checkbox" id="scales" name="scales" checked disabled />
          </ng-template>

          <ng-template #notPayed>
            <input type="checkbox" id="scales" name="scales" disabled />
          </ng-template>
        </td>

        <td class="td_item">
          <button (click)="deletePaymentModal.toggle()">Excluir</button>
        </td>
      </tr>
    </ng-template>
  </table>
</section>

<modal #addPaymentModal>

  <div class="modal-header">{{ modalTitle }}</div>

  <form (ngSubmit)="onSubmit()" #addPaymentForm="ngForm">
    <div class="form-group">
      <input
        class="form-control"
        type="text"
        name="user"
        id="user"
        placeholder="Usuário*"
        [(ngModel)]="paymentModal.user"
        required
      />
      <input
        class="form-control"
        type="text"
        name="value"
        id="value"
        placeholder="Valor*"
        [(ngModel)]="paymentModal.value"
        required
      />
    </div>

    <div class="form-group">
      <input
        class="form-control"
        type="text"
        name="date"
        id="date"
        placeholder="Data*"
        [(ngModel)]="paymentModal.date"
        required
      />
      <input
        class="form-control"
        type="text"
        name="title"
        id="title"
        placeholder="Título*"
        [(ngModel)]="paymentModal.title"
        required
      />
    </div>

    <footer class="modal-footer">
      <button class="btn btn_cancel" (click)="addPaymentModal.toggle()">Cancelar</button>
      <button class="btn btn_submit" type="submit">Salvar</button>
    </footer>
  </form>
</modal>

<modal #deletePaymentModal>
  <h1>Excluir pagamento</h1>
  <p>Usuário</p>
  <p>Data</p>
  <p>valor</p>
</modal>

<img src="assets/error.png" alt="Erro de pesquisa" width="100%" *ngIf="apiError" />
